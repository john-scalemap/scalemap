{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.214.0"},"children":{"ScaleMapDev":{"id":"ScaleMapDev","path":"ScaleMapDev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.214.0"},"children":{"ScaleMapTable":{"id":"ScaleMapTable","path":"ScaleMapDev/ScaleMapTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"PK","attributeType":"S"},{"attributeName":"SK","attributeType":"S"},{"attributeName":"GSI1PK","attributeType":"S"},{"attributeName":"GSI1SK","attributeType":"S"},{"attributeName":"GSI2PK","attributeType":"S"},{"attributeName":"GSI2SK","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"GSI1","keySchema":[{"attributeName":"GSI1PK","keyType":"HASH"},{"attributeName":"GSI1SK","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"GSI2","keySchema":[{"attributeName":"GSI2PK","keyType":"HASH"},{"attributeName":"GSI2SK","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"PK","keyType":"HASH"},{"attributeName":"SK","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"streamSpecification":{"streamViewType":"NEW_AND_OLD_IMAGES"},"tableName":"scalemap-dev","timeToLiveSpecification":{"attributeName":"TTL","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ScaleMapDev/ScaleMapTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"DocumentsBucket":{"id":"DocumentsBucket","path":"ScaleMapDev/DocumentsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/DocumentsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"scalemap-documents-dev","corsConfiguration":{"corsRules":[{"maxAge":300,"allowedHeaders":["*"],"allowedMethods":["GET","POST","PUT"],"allowedOrigins":["*"]}]},"lifecycleConfiguration":{"rules":[{"id":"cost-optimization","status":"Enabled","transitions":[{"storageClass":"STANDARD_IA","transitionInDays":30},{"storageClass":"GLACIER","transitionInDays":90}]}]},"versioningConfiguration":{"status":"Enabled"}}}},"Notifications":{"id":"Notifications","path":"ScaleMapDev/DocumentsBucket/Notifications","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/DocumentsBucket/Notifications/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"AllowBucketNotificationsToScaleMapDevProcessDocumentFunction8AC314D7":{"id":"AllowBucketNotificationsToScaleMapDevProcessDocumentFunction8AC314D7","path":"ScaleMapDev/DocumentsBucket/AllowBucketNotificationsToScaleMapDevProcessDocumentFunction8AC314D7","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ProcessDocumentFunctionC59F63F6","Arn"]},"principal":"s3.amazonaws.com","sourceAccount":"884337373956","sourceArn":{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]}}}}}},"DeadLetterQueue":{"id":"DeadLetterQueue","path":"ScaleMapDev/DeadLetterQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/DeadLetterQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"queueName":"scalemap-dlq-dev"}}}}},"LoginFunction":{"id":"LoginFunction","path":"ScaleMapDev/LoginFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapDev/LoginFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapDev/LoginFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapDev/LoginFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapDev/LoginFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/LoginFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LoginFunctionServiceRoleDefaultPolicy2FE1C77C","roles":[{"Ref":"LoginFunctionServiceRole74B42ABA"}]}}}}}}},"Code":{"id":"Code","path":"ScaleMapDev/LoginFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.214.0"},"children":{"Stage":{"id":"Stage","path":"ScaleMapDev/LoginFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.214.0"}},"AssetBucket":{"id":"AssetBucket","path":"ScaleMapDev/LoginFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.214.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/LoginFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"dev","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-login-dev","handler":"functions/auth/login.handler","memorySize":512,"role":{"Fn::GetAtt":["LoginFunctionServiceRole74B42ABA","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapDev/LoginFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/LoginFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapDev/LoginFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"ScaleMapDev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Code":{"id":"Code","path":"ScaleMapDev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.214.0"},"children":{"Stage":{"id":"Stage","path":"ScaleMapDev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.214.0"}},"AssetBucket":{"id":"AssetBucket","path":"ScaleMapDev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.214.0","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"ScaleMapDev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapDev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapDev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapDev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:DeleteRetentionPolicy","logs:PutRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"RefreshTokenFunction":{"id":"RefreshTokenFunction","path":"ScaleMapDev/RefreshTokenFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapDev/RefreshTokenFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapDev/RefreshTokenFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapDev/RefreshTokenFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapDev/RefreshTokenFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/RefreshTokenFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"RefreshTokenFunctionServiceRoleDefaultPolicy47C7EF3C","roles":[{"Ref":"RefreshTokenFunctionServiceRole7D6AF27F"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/RefreshTokenFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"dev","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-refresh-token-dev","handler":"functions/auth/refresh-token.handler","memorySize":512,"role":{"Fn::GetAtt":["RefreshTokenFunctionServiceRole7D6AF27F","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapDev/RefreshTokenFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/RefreshTokenFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapDev/RefreshTokenFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"ScaleMapDevJwtAuthorizer7FB6E645:Permissions":{"id":"ScaleMapDevJwtAuthorizer7FB6E645:Permissions","path":"ScaleMapDev/RefreshTokenFunction/ScaleMapDevJwtAuthorizer7FB6E645:Permissions","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/authorizers/",{"Ref":"JwtAuthorizer08CECD9F"}]]}}}}}},"RegisterFunction":{"id":"RegisterFunction","path":"ScaleMapDev/RegisterFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapDev/RegisterFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapDev/RegisterFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapDev/RegisterFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapDev/RegisterFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/RegisterFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"RegisterFunctionServiceRoleDefaultPolicyC4352E3C","roles":[{"Ref":"RegisterFunctionServiceRoleDB8F6C89"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/RegisterFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"dev","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-register-dev","handler":"functions/auth/register.handler","memorySize":512,"role":{"Fn::GetAtt":["RegisterFunctionServiceRoleDB8F6C89","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapDev/RegisterFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/RegisterFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapDev/RegisterFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"CreateCompanyFunction":{"id":"CreateCompanyFunction","path":"ScaleMapDev/CreateCompanyFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapDev/CreateCompanyFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapDev/CreateCompanyFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapDev/CreateCompanyFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapDev/CreateCompanyFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/CreateCompanyFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CreateCompanyFunctionServiceRoleDefaultPolicy7A2CB781","roles":[{"Ref":"CreateCompanyFunctionServiceRoleDBB9C1CF"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/CreateCompanyFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"dev","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-create-company-dev","handler":"functions/company/create-company.handler","memorySize":512,"role":{"Fn::GetAtt":["CreateCompanyFunctionServiceRoleDBB9C1CF","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapDev/CreateCompanyFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/CreateCompanyFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapDev/CreateCompanyFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"GetCompanyFunction":{"id":"GetCompanyFunction","path":"ScaleMapDev/GetCompanyFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapDev/GetCompanyFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapDev/GetCompanyFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapDev/GetCompanyFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapDev/GetCompanyFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/GetCompanyFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"GetCompanyFunctionServiceRoleDefaultPolicy3E5CAADC","roles":[{"Ref":"GetCompanyFunctionServiceRoleDEA2282F"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/GetCompanyFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"dev","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-get-company-dev","handler":"functions/company/get-company.handler","memorySize":512,"role":{"Fn::GetAtt":["GetCompanyFunctionServiceRoleDEA2282F","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapDev/GetCompanyFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/GetCompanyFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapDev/GetCompanyFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"CreateAssessmentFunction":{"id":"CreateAssessmentFunction","path":"ScaleMapDev/CreateAssessmentFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapDev/CreateAssessmentFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapDev/CreateAssessmentFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapDev/CreateAssessmentFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapDev/CreateAssessmentFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/CreateAssessmentFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CreateAssessmentFunctionServiceRoleDefaultPolicy388FB5C2","roles":[{"Ref":"CreateAssessmentFunctionServiceRole1F65987E"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/CreateAssessmentFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"dev","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-create-assessment-dev","handler":"functions/assessment/create-assessment.handler","memorySize":512,"role":{"Fn::GetAtt":["CreateAssessmentFunctionServiceRole1F65987E","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapDev/CreateAssessmentFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/CreateAssessmentFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapDev/CreateAssessmentFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"GetAssessmentFunction":{"id":"GetAssessmentFunction","path":"ScaleMapDev/GetAssessmentFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapDev/GetAssessmentFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapDev/GetAssessmentFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapDev/GetAssessmentFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapDev/GetAssessmentFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/GetAssessmentFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"GetAssessmentFunctionServiceRoleDefaultPolicy95FF1DE8","roles":[{"Ref":"GetAssessmentFunctionServiceRole5126DA07"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/GetAssessmentFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"dev","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-get-assessment-dev","handler":"functions/assessment/get-assessment.handler","memorySize":512,"role":{"Fn::GetAtt":["GetAssessmentFunctionServiceRole5126DA07","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapDev/GetAssessmentFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/GetAssessmentFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapDev/GetAssessmentFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"UpdateResponsesFunction":{"id":"UpdateResponsesFunction","path":"ScaleMapDev/UpdateResponsesFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapDev/UpdateResponsesFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapDev/UpdateResponsesFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapDev/UpdateResponsesFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapDev/UpdateResponsesFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/UpdateResponsesFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"UpdateResponsesFunctionServiceRoleDefaultPolicy9EF23BE3","roles":[{"Ref":"UpdateResponsesFunctionServiceRoleC79C8D19"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/UpdateResponsesFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"dev","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-update-responses-dev","handler":"functions/assessment/update-responses.handler","memorySize":512,"role":{"Fn::GetAtt":["UpdateResponsesFunctionServiceRoleC79C8D19","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapDev/UpdateResponsesFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/UpdateResponsesFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapDev/UpdateResponsesFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"UploadHandlerFunction":{"id":"UploadHandlerFunction","path":"ScaleMapDev/UploadHandlerFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapDev/UploadHandlerFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapDev/UploadHandlerFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapDev/UploadHandlerFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapDev/UploadHandlerFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/UploadHandlerFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"UploadHandlerFunctionServiceRoleDefaultPolicyBB324832","roles":[{"Ref":"UploadHandlerFunctionServiceRole483D683C"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/UploadHandlerFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"dev","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-upload-handler-dev","handler":"functions/documents/upload-handler.handler","memorySize":1024,"role":{"Fn::GetAtt":["UploadHandlerFunctionServiceRole483D683C","Arn"]},"runtime":"nodejs18.x","timeout":300}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapDev/UploadHandlerFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/UploadHandlerFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapDev/UploadHandlerFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"ProcessDocumentFunction":{"id":"ProcessDocumentFunction","path":"ScaleMapDev/ProcessDocumentFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapDev/ProcessDocumentFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapDev/ProcessDocumentFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapDev/ProcessDocumentFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapDev/ProcessDocumentFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ProcessDocumentFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail","textract:AnalyzeDocument","textract:GetDocumentAnalysis","textract:StartDocumentAnalysis"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"ProcessDocumentFunctionServiceRoleDefaultPolicyB341BFEF","roles":[{"Ref":"ProcessDocumentFunctionServiceRole89CDCA16"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/ProcessDocumentFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"dev","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-process-document-dev","handler":"functions/documents/process-document.handler","memorySize":2048,"role":{"Fn::GetAtt":["ProcessDocumentFunctionServiceRole89CDCA16","Arn"]},"runtime":"nodejs18.x","timeout":900}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapDev/ProcessDocumentFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ProcessDocumentFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapDev/ProcessDocumentFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"HealthFunction":{"id":"HealthFunction","path":"ScaleMapDev/HealthFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapDev/HealthFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapDev/HealthFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapDev/HealthFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapDev/HealthFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/HealthFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"HealthFunctionServiceRoleDefaultPolicy57228674","roles":[{"Ref":"HealthFunctionServiceRole04552894"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/HealthFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"dev","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-health-dev","handler":"functions/health.handler","memorySize":512,"role":{"Fn::GetAtt":["HealthFunctionServiceRole04552894","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapDev/HealthFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/HealthFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapDev/HealthFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"BucketNotificationsHandler050a0587b7544547bf325f094a3db834":{"id":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834","path":"ScaleMapDev/BucketNotificationsHandler050a0587b7544547bf325f094a3db834","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Role":{"id":"Role","path":"ScaleMapDev/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"ScaleMapDev/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapDev/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapDev/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"s3:PutBucketNotification","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36","roles":[{"Ref":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"JwtAuthorizer":{"id":"JwtAuthorizer","path":"ScaleMapDev/JwtAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.TokenAuthorizer","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/JwtAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAuthorizer","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Authorizer","aws:cdk:cloudformation:props":{"authorizerResultTtlInSeconds":300,"authorizerUri":{"Fn::Join":["",["arn:",{"Fn::Select":[1,{"Fn::Split":[":",{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]}]}]},":apigateway:",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]}]}]},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]},"/invocations"]]},"identitySource":"method.request.header.Authorization","name":"scalemap-jwt-authorizer-dev","restApiId":{"Ref":"ScaleMapApi2204383E"},"type":"TOKEN"}}}}},"ScaleMapApi":{"id":"ScaleMapApi","path":"ScaleMapDev/ScaleMapApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"ScaleMap API for dev environment","name":"ScaleMap API - dev"}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"ScaleMapDev/ScaleMapApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"ScaleMapDev/ScaleMapApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}]}}}}},"Account":{"id":"Account","path":"ScaleMapDev/ScaleMapApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["ScaleMapApiCloudWatchRole240E0A1B","Arn"]}}}},"Deployment":{"id":"Deployment","path":"ScaleMapDev/ScaleMapApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"ScaleMap API for dev environment","restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"ScaleMapDev/ScaleMapApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"ScaleMapApiDeployment77EBDD9Defb5a1a2af5a4ea9ed711cf36e04cbc8"},"restApiId":{"Ref":"ScaleMapApi2204383E"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"ScaleMapDev/ScaleMapApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.214.0"}},"Default":{"id":"Default","path":"ScaleMapDev/ScaleMapApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.214.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"ScaleMapDev/ScaleMapApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Fn::GetAtt":["ScaleMapApi2204383E","RootResourceId"]},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"health":{"id":"health","path":"ScaleMapDev/ScaleMapApi/Default/health","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/health/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ScaleMapApi2204383E","RootResourceId"]},"pathPart":"health","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapDev/ScaleMapApi/Default/health/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/health/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApihealthD68D4E2A"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"GET":{"id":"GET","path":"ScaleMapDev/ScaleMapApi/Default/health/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.GET..health":{"id":"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.GET..health","path":"ScaleMapDev/ScaleMapApi/Default/health/GET/ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.GET..health","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["HealthFunction19D7724A","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/GET/health"]]}}}},"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.GET..health":{"id":"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.GET..health","path":"ScaleMapDev/ScaleMapApi/Default/health/GET/ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.GET..health","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["HealthFunction19D7724A","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/GET/health"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/health/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["HealthFunction19D7724A","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApihealthD68D4E2A"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}},"auth":{"id":"auth","path":"ScaleMapDev/ScaleMapApi/Default/auth","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/auth/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ScaleMapApi2204383E","RootResourceId"]},"pathPart":"auth","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapDev/ScaleMapApi/Default/auth/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/auth/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApiauthBA436AC9"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"login":{"id":"login","path":"ScaleMapDev/ScaleMapApi/Default/auth/login","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/auth/login/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ScaleMapApiauthBA436AC9"},"pathPart":"login","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapDev/ScaleMapApi/Default/auth/login/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/auth/login/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApiauthlogin7F8100CE"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"POST":{"id":"POST","path":"ScaleMapDev/ScaleMapApi/Default/auth/login/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.POST..auth.login":{"id":"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.POST..auth.login","path":"ScaleMapDev/ScaleMapApi/Default/auth/login/POST/ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.POST..auth.login","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LoginFunction66F090C6","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/POST/auth/login"]]}}}},"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.POST..auth.login":{"id":"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.POST..auth.login","path":"ScaleMapDev/ScaleMapApi/Default/auth/login/POST/ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.POST..auth.login","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LoginFunction66F090C6","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/POST/auth/login"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/auth/login/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LoginFunction66F090C6","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApiauthlogin7F8100CE"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}},"register":{"id":"register","path":"ScaleMapDev/ScaleMapApi/Default/auth/register","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/auth/register/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ScaleMapApiauthBA436AC9"},"pathPart":"register","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapDev/ScaleMapApi/Default/auth/register/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/auth/register/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApiauthregisterBB7044BD"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"POST":{"id":"POST","path":"ScaleMapDev/ScaleMapApi/Default/auth/register/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.POST..auth.register":{"id":"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.POST..auth.register","path":"ScaleMapDev/ScaleMapApi/Default/auth/register/POST/ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.POST..auth.register","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RegisterFunction735506DF","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/POST/auth/register"]]}}}},"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.POST..auth.register":{"id":"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.POST..auth.register","path":"ScaleMapDev/ScaleMapApi/Default/auth/register/POST/ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.POST..auth.register","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RegisterFunction735506DF","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/POST/auth/register"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/auth/register/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["RegisterFunction735506DF","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApiauthregisterBB7044BD"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}},"refresh":{"id":"refresh","path":"ScaleMapDev/ScaleMapApi/Default/auth/refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/auth/refresh/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ScaleMapApiauthBA436AC9"},"pathPart":"refresh","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapDev/ScaleMapApi/Default/auth/refresh/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/auth/refresh/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApiauthrefresh503A46F4"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"POST":{"id":"POST","path":"ScaleMapDev/ScaleMapApi/Default/auth/refresh/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.POST..auth.refresh":{"id":"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.POST..auth.refresh","path":"ScaleMapDev/ScaleMapApi/Default/auth/refresh/POST/ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.POST..auth.refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/POST/auth/refresh"]]}}}},"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.POST..auth.refresh":{"id":"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.POST..auth.refresh","path":"ScaleMapDev/ScaleMapApi/Default/auth/refresh/POST/ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.POST..auth.refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/POST/auth/refresh"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/auth/refresh/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApiauthrefresh503A46F4"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}}}},"company":{"id":"company","path":"ScaleMapDev/ScaleMapApi/Default/company","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/company/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ScaleMapApi2204383E","RootResourceId"]},"pathPart":"company","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapDev/ScaleMapApi/Default/company/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/company/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApicompanyE86C5AA2"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"POST":{"id":"POST","path":"ScaleMapDev/ScaleMapApi/Default/company/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.POST..company":{"id":"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.POST..company","path":"ScaleMapDev/ScaleMapApi/Default/company/POST/ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.POST..company","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateCompanyFunctionB2EDBE20","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/POST/company"]]}}}},"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.POST..company":{"id":"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.POST..company","path":"ScaleMapDev/ScaleMapApi/Default/company/POST/ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.POST..company","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateCompanyFunctionB2EDBE20","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/POST/company"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/company/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JwtAuthorizer08CECD9F"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CreateCompanyFunctionB2EDBE20","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApicompanyE86C5AA2"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"GET":{"id":"GET","path":"ScaleMapDev/ScaleMapApi/Default/company/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.GET..company":{"id":"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.GET..company","path":"ScaleMapDev/ScaleMapApi/Default/company/GET/ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.GET..company","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetCompanyFunction40521299","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/GET/company"]]}}}},"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.GET..company":{"id":"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.GET..company","path":"ScaleMapDev/ScaleMapApi/Default/company/GET/ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.GET..company","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetCompanyFunction40521299","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/GET/company"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/company/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JwtAuthorizer08CECD9F"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetCompanyFunction40521299","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApicompanyE86C5AA2"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}},"assessment":{"id":"assessment","path":"ScaleMapDev/ScaleMapApi/Default/assessment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/assessment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ScaleMapApi2204383E","RootResourceId"]},"pathPart":"assessment","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapDev/ScaleMapApi/Default/assessment/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/assessment/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApiassessmentC3736B5E"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"POST":{"id":"POST","path":"ScaleMapDev/ScaleMapApi/Default/assessment/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.POST..assessment":{"id":"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.POST..assessment","path":"ScaleMapDev/ScaleMapApi/Default/assessment/POST/ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.POST..assessment","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateAssessmentFunction9342934F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/POST/assessment"]]}}}},"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.POST..assessment":{"id":"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.POST..assessment","path":"ScaleMapDev/ScaleMapApi/Default/assessment/POST/ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.POST..assessment","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateAssessmentFunction9342934F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/POST/assessment"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/assessment/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JwtAuthorizer08CECD9F"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CreateAssessmentFunction9342934F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApiassessmentC3736B5E"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"GET":{"id":"GET","path":"ScaleMapDev/ScaleMapApi/Default/assessment/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.GET..assessment":{"id":"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.GET..assessment","path":"ScaleMapDev/ScaleMapApi/Default/assessment/GET/ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.GET..assessment","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetAssessmentFunction53DE8AFB","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/GET/assessment"]]}}}},"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.GET..assessment":{"id":"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.GET..assessment","path":"ScaleMapDev/ScaleMapApi/Default/assessment/GET/ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.GET..assessment","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetAssessmentFunction53DE8AFB","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/GET/assessment"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/assessment/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JwtAuthorizer08CECD9F"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetAssessmentFunction53DE8AFB","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApiassessmentC3736B5E"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"responses":{"id":"responses","path":"ScaleMapDev/ScaleMapApi/Default/assessment/responses","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/assessment/responses/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ScaleMapApiassessmentC3736B5E"},"pathPart":"responses","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapDev/ScaleMapApi/Default/assessment/responses/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/assessment/responses/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApiassessmentresponses1B5A68B6"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"PUT":{"id":"PUT","path":"ScaleMapDev/ScaleMapApi/Default/assessment/responses/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.PUT..assessment.responses":{"id":"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.PUT..assessment.responses","path":"ScaleMapDev/ScaleMapApi/Default/assessment/responses/PUT/ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.PUT..assessment.responses","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UpdateResponsesFunctionBF692635","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/PUT/assessment/responses"]]}}}},"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.PUT..assessment.responses":{"id":"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.PUT..assessment.responses","path":"ScaleMapDev/ScaleMapApi/Default/assessment/responses/PUT/ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.PUT..assessment.responses","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UpdateResponsesFunctionBF692635","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/PUT/assessment/responses"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/assessment/responses/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JwtAuthorizer08CECD9F"},"httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UpdateResponsesFunctionBF692635","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApiassessmentresponses1B5A68B6"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}}}},"documents":{"id":"documents","path":"ScaleMapDev/ScaleMapApi/Default/documents","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/documents/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ScaleMapApi2204383E","RootResourceId"]},"pathPart":"documents","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapDev/ScaleMapApi/Default/documents/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/documents/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApidocumentsF359908A"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"upload":{"id":"upload","path":"ScaleMapDev/ScaleMapApi/Default/documents/upload","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/documents/upload/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ScaleMapApidocumentsF359908A"},"pathPart":"upload","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapDev/ScaleMapApi/Default/documents/upload/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/documents/upload/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApidocumentsupload9463C0ED"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"POST":{"id":"POST","path":"ScaleMapDev/ScaleMapApi/Default/documents/upload/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.POST..documents.upload":{"id":"ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.POST..documents.upload","path":"ScaleMapDev/ScaleMapApi/Default/documents/upload/POST/ApiPermission.ScaleMapDevScaleMapApiE4F3E3DD.POST..documents.upload","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UploadHandlerFunction1DEB4309","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/POST/documents/upload"]]}}}},"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.POST..documents.upload":{"id":"ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.POST..documents.upload","path":"ScaleMapDev/ScaleMapApi/Default/documents/upload/POST/ApiPermission.Test.ScaleMapDevScaleMapApiE4F3E3DD.POST..documents.upload","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UploadHandlerFunction1DEB4309","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/POST/documents/upload"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapDev/ScaleMapApi/Default/documents/upload/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JwtAuthorizer08CECD9F"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UploadHandlerFunction1DEB4309","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApidocumentsupload9463C0ED"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}}}}}}}},"ApiErrorAlarm":{"id":"ApiErrorAlarm","path":"ScaleMapDev/ApiErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/ApiErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmName":"scalemap-api-errors-dev","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"ApiName","value":"ScaleMap API - dev"}],"evaluationPeriods":2,"metricName":"5XXError","namespace":"AWS/ApiGateway","period":300,"statistic":"Sum","threshold":10,"treatMissingData":"notBreaching"}}}}},"LambdaErrorAlarm":{"id":"LambdaErrorAlarm","path":"ScaleMapDev/LambdaErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/LambdaErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmName":"scalemap-lambda-errors-dev","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"HealthFunction19D7724A"}}],"evaluationPeriods":2,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":5,"treatMissingData":"notBreaching"}}}}},"CostAlarm":{"id":"CostAlarm","path":"ScaleMapDev/CostAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapDev/CostAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmName":"scalemap-cost-dev","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"Currency","value":"USD"}],"evaluationPeriods":1,"metricName":"EstimatedCharges","namespace":"AWS/Billing","period":300,"statistic":"Maximum","threshold":50,"treatMissingData":"notBreaching"}}}}},"ApiUrl":{"id":"ApiUrl","path":"ScaleMapDev/ApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.214.0"}},"TableName":{"id":"TableName","path":"ScaleMapDev/TableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.214.0"}},"DocumentsBucketName":{"id":"DocumentsBucketName","path":"ScaleMapDev/DocumentsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.214.0"}},"DlqUrl":{"id":"DlqUrl","path":"ScaleMapDev/DlqUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.214.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"ScaleMapDev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"ScaleMapDev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ScaleMapDev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.214.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ScaleMapDev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.214.0"}}}},"ScaleMapStaging":{"id":"ScaleMapStaging","path":"ScaleMapStaging","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.214.0"},"children":{"ScaleMapTable":{"id":"ScaleMapTable","path":"ScaleMapStaging/ScaleMapTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"PK","attributeType":"S"},{"attributeName":"SK","attributeType":"S"},{"attributeName":"GSI1PK","attributeType":"S"},{"attributeName":"GSI1SK","attributeType":"S"},{"attributeName":"GSI2PK","attributeType":"S"},{"attributeName":"GSI2SK","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"GSI1","keySchema":[{"attributeName":"GSI1PK","keyType":"HASH"},{"attributeName":"GSI1SK","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"GSI2","keySchema":[{"attributeName":"GSI2PK","keyType":"HASH"},{"attributeName":"GSI2SK","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"PK","keyType":"HASH"},{"attributeName":"SK","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"streamSpecification":{"streamViewType":"NEW_AND_OLD_IMAGES"},"tableName":"scalemap-staging","timeToLiveSpecification":{"attributeName":"TTL","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ScaleMapStaging/ScaleMapTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"DocumentsBucket":{"id":"DocumentsBucket","path":"ScaleMapStaging/DocumentsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/DocumentsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"scalemap-documents-staging","corsConfiguration":{"corsRules":[{"maxAge":300,"allowedHeaders":["*"],"allowedMethods":["GET","POST","PUT"],"allowedOrigins":["*"]}]},"lifecycleConfiguration":{"rules":[{"id":"cost-optimization","status":"Enabled","transitions":[{"storageClass":"STANDARD_IA","transitionInDays":30},{"storageClass":"GLACIER","transitionInDays":90}]}]},"versioningConfiguration":{"status":"Enabled"}}}},"Notifications":{"id":"Notifications","path":"ScaleMapStaging/DocumentsBucket/Notifications","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/DocumentsBucket/Notifications/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"AllowBucketNotificationsToScaleMapStagingProcessDocumentFunction937A587C":{"id":"AllowBucketNotificationsToScaleMapStagingProcessDocumentFunction937A587C","path":"ScaleMapStaging/DocumentsBucket/AllowBucketNotificationsToScaleMapStagingProcessDocumentFunction937A587C","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ProcessDocumentFunctionC59F63F6","Arn"]},"principal":"s3.amazonaws.com","sourceAccount":"884337373956","sourceArn":{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]}}}}}},"DeadLetterQueue":{"id":"DeadLetterQueue","path":"ScaleMapStaging/DeadLetterQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/DeadLetterQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"queueName":"scalemap-dlq-staging"}}}}},"LoginFunction":{"id":"LoginFunction","path":"ScaleMapStaging/LoginFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapStaging/LoginFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapStaging/LoginFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapStaging/LoginFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapStaging/LoginFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/LoginFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LoginFunctionServiceRoleDefaultPolicy2FE1C77C","roles":[{"Ref":"LoginFunctionServiceRole74B42ABA"}]}}}}}}},"Code":{"id":"Code","path":"ScaleMapStaging/LoginFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.214.0"},"children":{"Stage":{"id":"Stage","path":"ScaleMapStaging/LoginFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.214.0"}},"AssetBucket":{"id":"AssetBucket","path":"ScaleMapStaging/LoginFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.214.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/LoginFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"staging","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-login-staging","handler":"functions/auth/login.handler","memorySize":512,"role":{"Fn::GetAtt":["LoginFunctionServiceRole74B42ABA","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapStaging/LoginFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/LoginFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapStaging/LoginFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"ScaleMapStaging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Code":{"id":"Code","path":"ScaleMapStaging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.214.0"},"children":{"Stage":{"id":"Stage","path":"ScaleMapStaging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.214.0"}},"AssetBucket":{"id":"AssetBucket","path":"ScaleMapStaging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.214.0","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"ScaleMapStaging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapStaging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapStaging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapStaging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:DeleteRetentionPolicy","logs:PutRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"RefreshTokenFunction":{"id":"RefreshTokenFunction","path":"ScaleMapStaging/RefreshTokenFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapStaging/RefreshTokenFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapStaging/RefreshTokenFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapStaging/RefreshTokenFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapStaging/RefreshTokenFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/RefreshTokenFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"RefreshTokenFunctionServiceRoleDefaultPolicy47C7EF3C","roles":[{"Ref":"RefreshTokenFunctionServiceRole7D6AF27F"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/RefreshTokenFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"staging","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-refresh-token-staging","handler":"functions/auth/refresh-token.handler","memorySize":512,"role":{"Fn::GetAtt":["RefreshTokenFunctionServiceRole7D6AF27F","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapStaging/RefreshTokenFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/RefreshTokenFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapStaging/RefreshTokenFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"ScaleMapStagingJwtAuthorizerB3A92219:Permissions":{"id":"ScaleMapStagingJwtAuthorizerB3A92219:Permissions","path":"ScaleMapStaging/RefreshTokenFunction/ScaleMapStagingJwtAuthorizerB3A92219:Permissions","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/authorizers/",{"Ref":"JwtAuthorizer08CECD9F"}]]}}}}}},"RegisterFunction":{"id":"RegisterFunction","path":"ScaleMapStaging/RegisterFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapStaging/RegisterFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapStaging/RegisterFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapStaging/RegisterFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapStaging/RegisterFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/RegisterFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"RegisterFunctionServiceRoleDefaultPolicyC4352E3C","roles":[{"Ref":"RegisterFunctionServiceRoleDB8F6C89"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/RegisterFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"staging","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-register-staging","handler":"functions/auth/register.handler","memorySize":512,"role":{"Fn::GetAtt":["RegisterFunctionServiceRoleDB8F6C89","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapStaging/RegisterFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/RegisterFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapStaging/RegisterFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"CreateCompanyFunction":{"id":"CreateCompanyFunction","path":"ScaleMapStaging/CreateCompanyFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapStaging/CreateCompanyFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapStaging/CreateCompanyFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapStaging/CreateCompanyFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapStaging/CreateCompanyFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/CreateCompanyFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CreateCompanyFunctionServiceRoleDefaultPolicy7A2CB781","roles":[{"Ref":"CreateCompanyFunctionServiceRoleDBB9C1CF"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/CreateCompanyFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"staging","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-create-company-staging","handler":"functions/company/create-company.handler","memorySize":512,"role":{"Fn::GetAtt":["CreateCompanyFunctionServiceRoleDBB9C1CF","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapStaging/CreateCompanyFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/CreateCompanyFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapStaging/CreateCompanyFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"GetCompanyFunction":{"id":"GetCompanyFunction","path":"ScaleMapStaging/GetCompanyFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapStaging/GetCompanyFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapStaging/GetCompanyFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapStaging/GetCompanyFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapStaging/GetCompanyFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/GetCompanyFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"GetCompanyFunctionServiceRoleDefaultPolicy3E5CAADC","roles":[{"Ref":"GetCompanyFunctionServiceRoleDEA2282F"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/GetCompanyFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"staging","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-get-company-staging","handler":"functions/company/get-company.handler","memorySize":512,"role":{"Fn::GetAtt":["GetCompanyFunctionServiceRoleDEA2282F","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapStaging/GetCompanyFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/GetCompanyFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapStaging/GetCompanyFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"CreateAssessmentFunction":{"id":"CreateAssessmentFunction","path":"ScaleMapStaging/CreateAssessmentFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapStaging/CreateAssessmentFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapStaging/CreateAssessmentFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapStaging/CreateAssessmentFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapStaging/CreateAssessmentFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/CreateAssessmentFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CreateAssessmentFunctionServiceRoleDefaultPolicy388FB5C2","roles":[{"Ref":"CreateAssessmentFunctionServiceRole1F65987E"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/CreateAssessmentFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"staging","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-create-assessment-staging","handler":"functions/assessment/create-assessment.handler","memorySize":512,"role":{"Fn::GetAtt":["CreateAssessmentFunctionServiceRole1F65987E","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapStaging/CreateAssessmentFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/CreateAssessmentFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapStaging/CreateAssessmentFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"GetAssessmentFunction":{"id":"GetAssessmentFunction","path":"ScaleMapStaging/GetAssessmentFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapStaging/GetAssessmentFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapStaging/GetAssessmentFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapStaging/GetAssessmentFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapStaging/GetAssessmentFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/GetAssessmentFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"GetAssessmentFunctionServiceRoleDefaultPolicy95FF1DE8","roles":[{"Ref":"GetAssessmentFunctionServiceRole5126DA07"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/GetAssessmentFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"staging","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-get-assessment-staging","handler":"functions/assessment/get-assessment.handler","memorySize":512,"role":{"Fn::GetAtt":["GetAssessmentFunctionServiceRole5126DA07","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapStaging/GetAssessmentFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/GetAssessmentFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapStaging/GetAssessmentFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"UpdateResponsesFunction":{"id":"UpdateResponsesFunction","path":"ScaleMapStaging/UpdateResponsesFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapStaging/UpdateResponsesFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapStaging/UpdateResponsesFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapStaging/UpdateResponsesFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapStaging/UpdateResponsesFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/UpdateResponsesFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"UpdateResponsesFunctionServiceRoleDefaultPolicy9EF23BE3","roles":[{"Ref":"UpdateResponsesFunctionServiceRoleC79C8D19"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/UpdateResponsesFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"staging","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-update-responses-staging","handler":"functions/assessment/update-responses.handler","memorySize":512,"role":{"Fn::GetAtt":["UpdateResponsesFunctionServiceRoleC79C8D19","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapStaging/UpdateResponsesFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/UpdateResponsesFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapStaging/UpdateResponsesFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"UploadHandlerFunction":{"id":"UploadHandlerFunction","path":"ScaleMapStaging/UploadHandlerFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapStaging/UploadHandlerFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapStaging/UploadHandlerFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapStaging/UploadHandlerFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapStaging/UploadHandlerFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/UploadHandlerFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"UploadHandlerFunctionServiceRoleDefaultPolicyBB324832","roles":[{"Ref":"UploadHandlerFunctionServiceRole483D683C"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/UploadHandlerFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"staging","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-upload-handler-staging","handler":"functions/documents/upload-handler.handler","memorySize":1024,"role":{"Fn::GetAtt":["UploadHandlerFunctionServiceRole483D683C","Arn"]},"runtime":"nodejs18.x","timeout":300}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapStaging/UploadHandlerFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/UploadHandlerFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapStaging/UploadHandlerFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"ProcessDocumentFunction":{"id":"ProcessDocumentFunction","path":"ScaleMapStaging/ProcessDocumentFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapStaging/ProcessDocumentFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapStaging/ProcessDocumentFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapStaging/ProcessDocumentFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapStaging/ProcessDocumentFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ProcessDocumentFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail","textract:AnalyzeDocument","textract:GetDocumentAnalysis","textract:StartDocumentAnalysis"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"ProcessDocumentFunctionServiceRoleDefaultPolicyB341BFEF","roles":[{"Ref":"ProcessDocumentFunctionServiceRole89CDCA16"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/ProcessDocumentFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"staging","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-process-document-staging","handler":"functions/documents/process-document.handler","memorySize":2048,"role":{"Fn::GetAtt":["ProcessDocumentFunctionServiceRole89CDCA16","Arn"]},"runtime":"nodejs18.x","timeout":900}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapStaging/ProcessDocumentFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ProcessDocumentFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapStaging/ProcessDocumentFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"HealthFunction":{"id":"HealthFunction","path":"ScaleMapStaging/HealthFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapStaging/HealthFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapStaging/HealthFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapStaging/HealthFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapStaging/HealthFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/HealthFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"HealthFunctionServiceRoleDefaultPolicy57228674","roles":[{"Ref":"HealthFunctionServiceRole04552894"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/HealthFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"staging","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-health-staging","handler":"functions/health.handler","memorySize":512,"role":{"Fn::GetAtt":["HealthFunctionServiceRole04552894","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapStaging/HealthFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/HealthFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapStaging/HealthFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"BucketNotificationsHandler050a0587b7544547bf325f094a3db834":{"id":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834","path":"ScaleMapStaging/BucketNotificationsHandler050a0587b7544547bf325f094a3db834","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Role":{"id":"Role","path":"ScaleMapStaging/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"ScaleMapStaging/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapStaging/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapStaging/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"s3:PutBucketNotification","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36","roles":[{"Ref":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"JwtAuthorizer":{"id":"JwtAuthorizer","path":"ScaleMapStaging/JwtAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.TokenAuthorizer","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/JwtAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAuthorizer","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Authorizer","aws:cdk:cloudformation:props":{"authorizerResultTtlInSeconds":300,"authorizerUri":{"Fn::Join":["",["arn:",{"Fn::Select":[1,{"Fn::Split":[":",{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]}]}]},":apigateway:",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]}]}]},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]},"/invocations"]]},"identitySource":"method.request.header.Authorization","name":"scalemap-jwt-authorizer-staging","restApiId":{"Ref":"ScaleMapApi2204383E"},"type":"TOKEN"}}}}},"ScaleMapApi":{"id":"ScaleMapApi","path":"ScaleMapStaging/ScaleMapApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"ScaleMap API for staging environment","name":"ScaleMap API - staging"}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"ScaleMapStaging/ScaleMapApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"ScaleMapStaging/ScaleMapApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}]}}}}},"Account":{"id":"Account","path":"ScaleMapStaging/ScaleMapApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["ScaleMapApiCloudWatchRole240E0A1B","Arn"]}}}},"Deployment":{"id":"Deployment","path":"ScaleMapStaging/ScaleMapApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"ScaleMap API for staging environment","restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"ScaleMapStaging/ScaleMapApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"ScaleMapApiDeployment77EBDD9Dc8d89f9488bd52ead5439c148d9fba98"},"restApiId":{"Ref":"ScaleMapApi2204383E"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"ScaleMapStaging/ScaleMapApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.214.0"}},"Default":{"id":"Default","path":"ScaleMapStaging/ScaleMapApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.214.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"ScaleMapStaging/ScaleMapApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Fn::GetAtt":["ScaleMapApi2204383E","RootResourceId"]},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"health":{"id":"health","path":"ScaleMapStaging/ScaleMapApi/Default/health","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/health/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ScaleMapApi2204383E","RootResourceId"]},"pathPart":"health","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapStaging/ScaleMapApi/Default/health/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/health/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApihealthD68D4E2A"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"GET":{"id":"GET","path":"ScaleMapStaging/ScaleMapApi/Default/health/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.GET..health":{"id":"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.GET..health","path":"ScaleMapStaging/ScaleMapApi/Default/health/GET/ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.GET..health","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["HealthFunction19D7724A","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/GET/health"]]}}}},"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.GET..health":{"id":"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.GET..health","path":"ScaleMapStaging/ScaleMapApi/Default/health/GET/ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.GET..health","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["HealthFunction19D7724A","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/GET/health"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/health/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["HealthFunction19D7724A","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApihealthD68D4E2A"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}},"auth":{"id":"auth","path":"ScaleMapStaging/ScaleMapApi/Default/auth","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/auth/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ScaleMapApi2204383E","RootResourceId"]},"pathPart":"auth","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapStaging/ScaleMapApi/Default/auth/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/auth/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApiauthBA436AC9"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"login":{"id":"login","path":"ScaleMapStaging/ScaleMapApi/Default/auth/login","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/auth/login/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ScaleMapApiauthBA436AC9"},"pathPart":"login","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapStaging/ScaleMapApi/Default/auth/login/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/auth/login/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApiauthlogin7F8100CE"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"POST":{"id":"POST","path":"ScaleMapStaging/ScaleMapApi/Default/auth/login/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.POST..auth.login":{"id":"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.POST..auth.login","path":"ScaleMapStaging/ScaleMapApi/Default/auth/login/POST/ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.POST..auth.login","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LoginFunction66F090C6","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/POST/auth/login"]]}}}},"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.POST..auth.login":{"id":"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.POST..auth.login","path":"ScaleMapStaging/ScaleMapApi/Default/auth/login/POST/ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.POST..auth.login","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LoginFunction66F090C6","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/POST/auth/login"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/auth/login/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LoginFunction66F090C6","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApiauthlogin7F8100CE"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}},"register":{"id":"register","path":"ScaleMapStaging/ScaleMapApi/Default/auth/register","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/auth/register/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ScaleMapApiauthBA436AC9"},"pathPart":"register","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapStaging/ScaleMapApi/Default/auth/register/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/auth/register/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApiauthregisterBB7044BD"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"POST":{"id":"POST","path":"ScaleMapStaging/ScaleMapApi/Default/auth/register/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.POST..auth.register":{"id":"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.POST..auth.register","path":"ScaleMapStaging/ScaleMapApi/Default/auth/register/POST/ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.POST..auth.register","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RegisterFunction735506DF","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/POST/auth/register"]]}}}},"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.POST..auth.register":{"id":"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.POST..auth.register","path":"ScaleMapStaging/ScaleMapApi/Default/auth/register/POST/ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.POST..auth.register","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RegisterFunction735506DF","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/POST/auth/register"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/auth/register/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["RegisterFunction735506DF","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApiauthregisterBB7044BD"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}},"refresh":{"id":"refresh","path":"ScaleMapStaging/ScaleMapApi/Default/auth/refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/auth/refresh/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ScaleMapApiauthBA436AC9"},"pathPart":"refresh","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapStaging/ScaleMapApi/Default/auth/refresh/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/auth/refresh/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApiauthrefresh503A46F4"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"POST":{"id":"POST","path":"ScaleMapStaging/ScaleMapApi/Default/auth/refresh/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.POST..auth.refresh":{"id":"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.POST..auth.refresh","path":"ScaleMapStaging/ScaleMapApi/Default/auth/refresh/POST/ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.POST..auth.refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/POST/auth/refresh"]]}}}},"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.POST..auth.refresh":{"id":"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.POST..auth.refresh","path":"ScaleMapStaging/ScaleMapApi/Default/auth/refresh/POST/ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.POST..auth.refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/POST/auth/refresh"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/auth/refresh/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApiauthrefresh503A46F4"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}}}},"company":{"id":"company","path":"ScaleMapStaging/ScaleMapApi/Default/company","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/company/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ScaleMapApi2204383E","RootResourceId"]},"pathPart":"company","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapStaging/ScaleMapApi/Default/company/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/company/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApicompanyE86C5AA2"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"POST":{"id":"POST","path":"ScaleMapStaging/ScaleMapApi/Default/company/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.POST..company":{"id":"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.POST..company","path":"ScaleMapStaging/ScaleMapApi/Default/company/POST/ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.POST..company","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateCompanyFunctionB2EDBE20","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/POST/company"]]}}}},"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.POST..company":{"id":"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.POST..company","path":"ScaleMapStaging/ScaleMapApi/Default/company/POST/ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.POST..company","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateCompanyFunctionB2EDBE20","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/POST/company"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/company/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JwtAuthorizer08CECD9F"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CreateCompanyFunctionB2EDBE20","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApicompanyE86C5AA2"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"GET":{"id":"GET","path":"ScaleMapStaging/ScaleMapApi/Default/company/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.GET..company":{"id":"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.GET..company","path":"ScaleMapStaging/ScaleMapApi/Default/company/GET/ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.GET..company","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetCompanyFunction40521299","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/GET/company"]]}}}},"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.GET..company":{"id":"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.GET..company","path":"ScaleMapStaging/ScaleMapApi/Default/company/GET/ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.GET..company","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetCompanyFunction40521299","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/GET/company"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/company/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JwtAuthorizer08CECD9F"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetCompanyFunction40521299","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApicompanyE86C5AA2"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}},"assessment":{"id":"assessment","path":"ScaleMapStaging/ScaleMapApi/Default/assessment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/assessment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ScaleMapApi2204383E","RootResourceId"]},"pathPart":"assessment","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapStaging/ScaleMapApi/Default/assessment/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/assessment/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApiassessmentC3736B5E"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"POST":{"id":"POST","path":"ScaleMapStaging/ScaleMapApi/Default/assessment/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.POST..assessment":{"id":"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.POST..assessment","path":"ScaleMapStaging/ScaleMapApi/Default/assessment/POST/ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.POST..assessment","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateAssessmentFunction9342934F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/POST/assessment"]]}}}},"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.POST..assessment":{"id":"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.POST..assessment","path":"ScaleMapStaging/ScaleMapApi/Default/assessment/POST/ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.POST..assessment","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateAssessmentFunction9342934F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/POST/assessment"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/assessment/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JwtAuthorizer08CECD9F"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CreateAssessmentFunction9342934F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApiassessmentC3736B5E"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"GET":{"id":"GET","path":"ScaleMapStaging/ScaleMapApi/Default/assessment/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.GET..assessment":{"id":"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.GET..assessment","path":"ScaleMapStaging/ScaleMapApi/Default/assessment/GET/ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.GET..assessment","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetAssessmentFunction53DE8AFB","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/GET/assessment"]]}}}},"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.GET..assessment":{"id":"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.GET..assessment","path":"ScaleMapStaging/ScaleMapApi/Default/assessment/GET/ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.GET..assessment","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetAssessmentFunction53DE8AFB","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/GET/assessment"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/assessment/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JwtAuthorizer08CECD9F"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetAssessmentFunction53DE8AFB","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApiassessmentC3736B5E"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"responses":{"id":"responses","path":"ScaleMapStaging/ScaleMapApi/Default/assessment/responses","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/assessment/responses/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ScaleMapApiassessmentC3736B5E"},"pathPart":"responses","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapStaging/ScaleMapApi/Default/assessment/responses/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/assessment/responses/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApiassessmentresponses1B5A68B6"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"PUT":{"id":"PUT","path":"ScaleMapStaging/ScaleMapApi/Default/assessment/responses/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.PUT..assessment.responses":{"id":"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.PUT..assessment.responses","path":"ScaleMapStaging/ScaleMapApi/Default/assessment/responses/PUT/ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.PUT..assessment.responses","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UpdateResponsesFunctionBF692635","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/PUT/assessment/responses"]]}}}},"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.PUT..assessment.responses":{"id":"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.PUT..assessment.responses","path":"ScaleMapStaging/ScaleMapApi/Default/assessment/responses/PUT/ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.PUT..assessment.responses","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UpdateResponsesFunctionBF692635","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/PUT/assessment/responses"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/assessment/responses/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JwtAuthorizer08CECD9F"},"httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UpdateResponsesFunctionBF692635","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApiassessmentresponses1B5A68B6"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}}}},"documents":{"id":"documents","path":"ScaleMapStaging/ScaleMapApi/Default/documents","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/documents/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ScaleMapApi2204383E","RootResourceId"]},"pathPart":"documents","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapStaging/ScaleMapApi/Default/documents/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/documents/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApidocumentsF359908A"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"upload":{"id":"upload","path":"ScaleMapStaging/ScaleMapApi/Default/documents/upload","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/documents/upload/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ScaleMapApidocumentsF359908A"},"pathPart":"upload","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapStaging/ScaleMapApi/Default/documents/upload/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/documents/upload/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApidocumentsupload9463C0ED"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"POST":{"id":"POST","path":"ScaleMapStaging/ScaleMapApi/Default/documents/upload/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.POST..documents.upload":{"id":"ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.POST..documents.upload","path":"ScaleMapStaging/ScaleMapApi/Default/documents/upload/POST/ApiPermission.ScaleMapStagingScaleMapApi0D72BBEB.POST..documents.upload","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UploadHandlerFunction1DEB4309","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/POST/documents/upload"]]}}}},"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.POST..documents.upload":{"id":"ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.POST..documents.upload","path":"ScaleMapStaging/ScaleMapApi/Default/documents/upload/POST/ApiPermission.Test.ScaleMapStagingScaleMapApi0D72BBEB.POST..documents.upload","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UploadHandlerFunction1DEB4309","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/POST/documents/upload"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapStaging/ScaleMapApi/Default/documents/upload/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JwtAuthorizer08CECD9F"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UploadHandlerFunction1DEB4309","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApidocumentsupload9463C0ED"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}}}}}}}},"ApiErrorAlarm":{"id":"ApiErrorAlarm","path":"ScaleMapStaging/ApiErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/ApiErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmName":"scalemap-api-errors-staging","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"ApiName","value":"ScaleMap API - staging"}],"evaluationPeriods":2,"metricName":"5XXError","namespace":"AWS/ApiGateway","period":300,"statistic":"Sum","threshold":10,"treatMissingData":"notBreaching"}}}}},"LambdaErrorAlarm":{"id":"LambdaErrorAlarm","path":"ScaleMapStaging/LambdaErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/LambdaErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmName":"scalemap-lambda-errors-staging","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"HealthFunction19D7724A"}}],"evaluationPeriods":2,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":5,"treatMissingData":"notBreaching"}}}}},"CostAlarm":{"id":"CostAlarm","path":"ScaleMapStaging/CostAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapStaging/CostAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmName":"scalemap-cost-staging","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"Currency","value":"USD"}],"evaluationPeriods":1,"metricName":"EstimatedCharges","namespace":"AWS/Billing","period":300,"statistic":"Maximum","threshold":50,"treatMissingData":"notBreaching"}}}}},"ApiUrl":{"id":"ApiUrl","path":"ScaleMapStaging/ApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.214.0"}},"TableName":{"id":"TableName","path":"ScaleMapStaging/TableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.214.0"}},"DocumentsBucketName":{"id":"DocumentsBucketName","path":"ScaleMapStaging/DocumentsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.214.0"}},"DlqUrl":{"id":"DlqUrl","path":"ScaleMapStaging/DlqUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.214.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"ScaleMapStaging/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"ScaleMapStaging/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ScaleMapStaging/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.214.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ScaleMapStaging/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.214.0"}}}},"ScaleMapProd":{"id":"ScaleMapProd","path":"ScaleMapProd","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.214.0"},"children":{"ScaleMapTable":{"id":"ScaleMapTable","path":"ScaleMapProd/ScaleMapTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"PK","attributeType":"S"},{"attributeName":"SK","attributeType":"S"},{"attributeName":"GSI1PK","attributeType":"S"},{"attributeName":"GSI1SK","attributeType":"S"},{"attributeName":"GSI2PK","attributeType":"S"},{"attributeName":"GSI2SK","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"GSI1","keySchema":[{"attributeName":"GSI1PK","keyType":"HASH"},{"attributeName":"GSI1SK","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"GSI2","keySchema":[{"attributeName":"GSI2PK","keyType":"HASH"},{"attributeName":"GSI2SK","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"PK","keyType":"HASH"},{"attributeName":"SK","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"streamSpecification":{"streamViewType":"NEW_AND_OLD_IMAGES"},"tableName":"scalemap-production","timeToLiveSpecification":{"attributeName":"TTL","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ScaleMapProd/ScaleMapTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"DocumentsBucket":{"id":"DocumentsBucket","path":"ScaleMapProd/DocumentsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/DocumentsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"scalemap-documents-production","corsConfiguration":{"corsRules":[{"maxAge":300,"allowedHeaders":["*"],"allowedMethods":["GET","POST","PUT"],"allowedOrigins":["https://scalemap.ai"]}]},"lifecycleConfiguration":{"rules":[{"id":"cost-optimization","status":"Enabled","transitions":[{"storageClass":"STANDARD_IA","transitionInDays":30},{"storageClass":"GLACIER","transitionInDays":90}]}]},"versioningConfiguration":{"status":"Enabled"}}}},"Notifications":{"id":"Notifications","path":"ScaleMapProd/DocumentsBucket/Notifications","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/DocumentsBucket/Notifications/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"AllowBucketNotificationsToScaleMapProdProcessDocumentFunction878E4F94":{"id":"AllowBucketNotificationsToScaleMapProdProcessDocumentFunction878E4F94","path":"ScaleMapProd/DocumentsBucket/AllowBucketNotificationsToScaleMapProdProcessDocumentFunction878E4F94","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ProcessDocumentFunctionC59F63F6","Arn"]},"principal":"s3.amazonaws.com","sourceAccount":"884337373956","sourceArn":{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]}}}}}},"DeadLetterQueue":{"id":"DeadLetterQueue","path":"ScaleMapProd/DeadLetterQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/DeadLetterQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"queueName":"scalemap-dlq-production"}}}}},"LoginFunction":{"id":"LoginFunction","path":"ScaleMapProd/LoginFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapProd/LoginFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapProd/LoginFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapProd/LoginFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapProd/LoginFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/LoginFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LoginFunctionServiceRoleDefaultPolicy2FE1C77C","roles":[{"Ref":"LoginFunctionServiceRole74B42ABA"}]}}}}}}},"Code":{"id":"Code","path":"ScaleMapProd/LoginFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.214.0"},"children":{"Stage":{"id":"Stage","path":"ScaleMapProd/LoginFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.214.0"}},"AssetBucket":{"id":"AssetBucket","path":"ScaleMapProd/LoginFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.214.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/LoginFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"production","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-login-production","handler":"functions/auth/login.handler","memorySize":512,"role":{"Fn::GetAtt":["LoginFunctionServiceRole74B42ABA","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapProd/LoginFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/LoginFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapProd/LoginFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"ScaleMapProd/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Code":{"id":"Code","path":"ScaleMapProd/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.214.0"},"children":{"Stage":{"id":"Stage","path":"ScaleMapProd/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.214.0"}},"AssetBucket":{"id":"AssetBucket","path":"ScaleMapProd/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.214.0","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"ScaleMapProd/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapProd/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapProd/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapProd/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:DeleteRetentionPolicy","logs:PutRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"RefreshTokenFunction":{"id":"RefreshTokenFunction","path":"ScaleMapProd/RefreshTokenFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapProd/RefreshTokenFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapProd/RefreshTokenFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapProd/RefreshTokenFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapProd/RefreshTokenFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/RefreshTokenFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"RefreshTokenFunctionServiceRoleDefaultPolicy47C7EF3C","roles":[{"Ref":"RefreshTokenFunctionServiceRole7D6AF27F"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/RefreshTokenFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"production","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-refresh-token-production","handler":"functions/auth/refresh-token.handler","memorySize":512,"role":{"Fn::GetAtt":["RefreshTokenFunctionServiceRole7D6AF27F","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapProd/RefreshTokenFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/RefreshTokenFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapProd/RefreshTokenFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"ScaleMapProdJwtAuthorizer0418A32F:Permissions":{"id":"ScaleMapProdJwtAuthorizer0418A32F:Permissions","path":"ScaleMapProd/RefreshTokenFunction/ScaleMapProdJwtAuthorizer0418A32F:Permissions","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/authorizers/",{"Ref":"JwtAuthorizer08CECD9F"}]]}}}}}},"RegisterFunction":{"id":"RegisterFunction","path":"ScaleMapProd/RegisterFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapProd/RegisterFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapProd/RegisterFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapProd/RegisterFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapProd/RegisterFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/RegisterFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"RegisterFunctionServiceRoleDefaultPolicyC4352E3C","roles":[{"Ref":"RegisterFunctionServiceRoleDB8F6C89"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/RegisterFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"production","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-register-production","handler":"functions/auth/register.handler","memorySize":512,"role":{"Fn::GetAtt":["RegisterFunctionServiceRoleDB8F6C89","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapProd/RegisterFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/RegisterFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapProd/RegisterFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"CreateCompanyFunction":{"id":"CreateCompanyFunction","path":"ScaleMapProd/CreateCompanyFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapProd/CreateCompanyFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapProd/CreateCompanyFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapProd/CreateCompanyFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapProd/CreateCompanyFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/CreateCompanyFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CreateCompanyFunctionServiceRoleDefaultPolicy7A2CB781","roles":[{"Ref":"CreateCompanyFunctionServiceRoleDBB9C1CF"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/CreateCompanyFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"production","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-create-company-production","handler":"functions/company/create-company.handler","memorySize":512,"role":{"Fn::GetAtt":["CreateCompanyFunctionServiceRoleDBB9C1CF","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapProd/CreateCompanyFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/CreateCompanyFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapProd/CreateCompanyFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"GetCompanyFunction":{"id":"GetCompanyFunction","path":"ScaleMapProd/GetCompanyFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapProd/GetCompanyFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapProd/GetCompanyFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapProd/GetCompanyFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapProd/GetCompanyFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/GetCompanyFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"GetCompanyFunctionServiceRoleDefaultPolicy3E5CAADC","roles":[{"Ref":"GetCompanyFunctionServiceRoleDEA2282F"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/GetCompanyFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"production","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-get-company-production","handler":"functions/company/get-company.handler","memorySize":512,"role":{"Fn::GetAtt":["GetCompanyFunctionServiceRoleDEA2282F","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapProd/GetCompanyFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/GetCompanyFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapProd/GetCompanyFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"CreateAssessmentFunction":{"id":"CreateAssessmentFunction","path":"ScaleMapProd/CreateAssessmentFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapProd/CreateAssessmentFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapProd/CreateAssessmentFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapProd/CreateAssessmentFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapProd/CreateAssessmentFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/CreateAssessmentFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CreateAssessmentFunctionServiceRoleDefaultPolicy388FB5C2","roles":[{"Ref":"CreateAssessmentFunctionServiceRole1F65987E"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/CreateAssessmentFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"production","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-create-assessment-production","handler":"functions/assessment/create-assessment.handler","memorySize":512,"role":{"Fn::GetAtt":["CreateAssessmentFunctionServiceRole1F65987E","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapProd/CreateAssessmentFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/CreateAssessmentFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapProd/CreateAssessmentFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"GetAssessmentFunction":{"id":"GetAssessmentFunction","path":"ScaleMapProd/GetAssessmentFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapProd/GetAssessmentFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapProd/GetAssessmentFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapProd/GetAssessmentFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapProd/GetAssessmentFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/GetAssessmentFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"GetAssessmentFunctionServiceRoleDefaultPolicy95FF1DE8","roles":[{"Ref":"GetAssessmentFunctionServiceRole5126DA07"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/GetAssessmentFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"production","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-get-assessment-production","handler":"functions/assessment/get-assessment.handler","memorySize":512,"role":{"Fn::GetAtt":["GetAssessmentFunctionServiceRole5126DA07","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapProd/GetAssessmentFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/GetAssessmentFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapProd/GetAssessmentFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"UpdateResponsesFunction":{"id":"UpdateResponsesFunction","path":"ScaleMapProd/UpdateResponsesFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapProd/UpdateResponsesFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapProd/UpdateResponsesFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapProd/UpdateResponsesFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapProd/UpdateResponsesFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/UpdateResponsesFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"UpdateResponsesFunctionServiceRoleDefaultPolicy9EF23BE3","roles":[{"Ref":"UpdateResponsesFunctionServiceRoleC79C8D19"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/UpdateResponsesFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"production","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-update-responses-production","handler":"functions/assessment/update-responses.handler","memorySize":512,"role":{"Fn::GetAtt":["UpdateResponsesFunctionServiceRoleC79C8D19","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapProd/UpdateResponsesFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/UpdateResponsesFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapProd/UpdateResponsesFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"UploadHandlerFunction":{"id":"UploadHandlerFunction","path":"ScaleMapProd/UploadHandlerFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapProd/UploadHandlerFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapProd/UploadHandlerFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapProd/UploadHandlerFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapProd/UploadHandlerFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/UploadHandlerFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"UploadHandlerFunctionServiceRoleDefaultPolicyBB324832","roles":[{"Ref":"UploadHandlerFunctionServiceRole483D683C"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/UploadHandlerFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"production","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-upload-handler-production","handler":"functions/documents/upload-handler.handler","memorySize":1024,"role":{"Fn::GetAtt":["UploadHandlerFunctionServiceRole483D683C","Arn"]},"runtime":"nodejs18.x","timeout":300}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapProd/UploadHandlerFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/UploadHandlerFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapProd/UploadHandlerFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"ProcessDocumentFunction":{"id":"ProcessDocumentFunction","path":"ScaleMapProd/ProcessDocumentFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapProd/ProcessDocumentFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapProd/ProcessDocumentFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapProd/ProcessDocumentFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapProd/ProcessDocumentFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ProcessDocumentFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail","textract:AnalyzeDocument","textract:GetDocumentAnalysis","textract:StartDocumentAnalysis"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"ProcessDocumentFunctionServiceRoleDefaultPolicyB341BFEF","roles":[{"Ref":"ProcessDocumentFunctionServiceRole89CDCA16"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/ProcessDocumentFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"production","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-process-document-production","handler":"functions/documents/process-document.handler","memorySize":2048,"role":{"Fn::GetAtt":["ProcessDocumentFunctionServiceRole89CDCA16","Arn"]},"runtime":"nodejs18.x","timeout":900}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapProd/ProcessDocumentFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ProcessDocumentFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapProd/ProcessDocumentFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"HealthFunction":{"id":"HealthFunction","path":"ScaleMapProd/HealthFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.214.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ScaleMapProd/HealthFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ScaleMapProd/HealthFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapProd/HealthFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapProd/HealthFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/HealthFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScaleMapTableD1C6C54B","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"HealthFunctionServiceRoleDefaultPolicy57228674","roles":[{"Ref":"HealthFunctionServiceRole04552894"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/HealthFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-884337373956-eu-west-1","s3Key":"779df4660804a8352ffcc29c7d23d5fe7f9258edb332388078a9e5641f8939fc.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ScaleMapTableD1C6C54B"},"DOCUMENTS_BUCKET":{"Ref":"DocumentsBucket9EC9DEB9"},"STAGE":"production","REGION":"eu-west-1","DLQ_URL":{"Ref":"DeadLetterQueue9F481546"}}},"functionName":"scalemap-health-production","handler":"functions/health.handler","memorySize":512,"role":{"Fn::GetAtt":["HealthFunctionServiceRole04552894","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ScaleMapProd/HealthFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.214.0"},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/HealthFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"LogGroup":{"id":"LogGroup","path":"ScaleMapProd/HealthFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}}}},"BucketNotificationsHandler050a0587b7544547bf325f094a3db834":{"id":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834","path":"ScaleMapProd/BucketNotificationsHandler050a0587b7544547bf325f094a3db834","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Role":{"id":"Role","path":"ScaleMapProd/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"ScaleMapProd/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapProd/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ScaleMapProd/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"s3:PutBucketNotification","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36","roles":[{"Ref":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC"}]}}}}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"JwtAuthorizer":{"id":"JwtAuthorizer","path":"ScaleMapProd/JwtAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.TokenAuthorizer","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/JwtAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAuthorizer","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Authorizer","aws:cdk:cloudformation:props":{"authorizerResultTtlInSeconds":300,"authorizerUri":{"Fn::Join":["",["arn:",{"Fn::Select":[1,{"Fn::Split":[":",{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]}]}]},":apigateway:",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]}]}]},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]},"/invocations"]]},"identitySource":"method.request.header.Authorization","name":"scalemap-jwt-authorizer-production","restApiId":{"Ref":"ScaleMapApi2204383E"},"type":"TOKEN"}}}}},"ScaleMapApi":{"id":"ScaleMapApi","path":"ScaleMapProd/ScaleMapApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"ScaleMap API for production environment","name":"ScaleMap API - production"}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"ScaleMapProd/ScaleMapApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.214.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"ScaleMapProd/ScaleMapApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.214.0","metadata":[]}},"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}]}}}}},"Account":{"id":"Account","path":"ScaleMapProd/ScaleMapApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["ScaleMapApiCloudWatchRole240E0A1B","Arn"]}}}},"Deployment":{"id":"Deployment","path":"ScaleMapProd/ScaleMapApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"ScaleMap API for production environment","restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"ScaleMapProd/ScaleMapApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"ScaleMapApiDeployment77EBDD9Dc74d6a807ebaec6f66f7bc115f9688f3"},"restApiId":{"Ref":"ScaleMapApi2204383E"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"ScaleMapProd/ScaleMapApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.214.0"}},"Default":{"id":"Default","path":"ScaleMapProd/ScaleMapApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.214.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"ScaleMapProd/ScaleMapApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'https://scalemap.ai'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Fn::GetAtt":["ScaleMapApi2204383E","RootResourceId"]},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"health":{"id":"health","path":"ScaleMapProd/ScaleMapApi/Default/health","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/health/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ScaleMapApi2204383E","RootResourceId"]},"pathPart":"health","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapProd/ScaleMapApi/Default/health/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/health/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'https://scalemap.ai'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApihealthD68D4E2A"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"GET":{"id":"GET","path":"ScaleMapProd/ScaleMapApi/Default/health/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapProdScaleMapApi18A6D135.GET..health":{"id":"ApiPermission.ScaleMapProdScaleMapApi18A6D135.GET..health","path":"ScaleMapProd/ScaleMapApi/Default/health/GET/ApiPermission.ScaleMapProdScaleMapApi18A6D135.GET..health","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["HealthFunction19D7724A","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/GET/health"]]}}}},"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.GET..health":{"id":"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.GET..health","path":"ScaleMapProd/ScaleMapApi/Default/health/GET/ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.GET..health","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["HealthFunction19D7724A","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/GET/health"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/health/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["HealthFunction19D7724A","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApihealthD68D4E2A"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}},"auth":{"id":"auth","path":"ScaleMapProd/ScaleMapApi/Default/auth","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/auth/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ScaleMapApi2204383E","RootResourceId"]},"pathPart":"auth","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapProd/ScaleMapApi/Default/auth/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/auth/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'https://scalemap.ai'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApiauthBA436AC9"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"login":{"id":"login","path":"ScaleMapProd/ScaleMapApi/Default/auth/login","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/auth/login/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ScaleMapApiauthBA436AC9"},"pathPart":"login","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapProd/ScaleMapApi/Default/auth/login/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/auth/login/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'https://scalemap.ai'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApiauthlogin7F8100CE"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"POST":{"id":"POST","path":"ScaleMapProd/ScaleMapApi/Default/auth/login/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapProdScaleMapApi18A6D135.POST..auth.login":{"id":"ApiPermission.ScaleMapProdScaleMapApi18A6D135.POST..auth.login","path":"ScaleMapProd/ScaleMapApi/Default/auth/login/POST/ApiPermission.ScaleMapProdScaleMapApi18A6D135.POST..auth.login","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LoginFunction66F090C6","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/POST/auth/login"]]}}}},"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.POST..auth.login":{"id":"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.POST..auth.login","path":"ScaleMapProd/ScaleMapApi/Default/auth/login/POST/ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.POST..auth.login","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LoginFunction66F090C6","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/POST/auth/login"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/auth/login/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LoginFunction66F090C6","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApiauthlogin7F8100CE"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}},"register":{"id":"register","path":"ScaleMapProd/ScaleMapApi/Default/auth/register","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/auth/register/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ScaleMapApiauthBA436AC9"},"pathPart":"register","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapProd/ScaleMapApi/Default/auth/register/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/auth/register/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'https://scalemap.ai'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApiauthregisterBB7044BD"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"POST":{"id":"POST","path":"ScaleMapProd/ScaleMapApi/Default/auth/register/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapProdScaleMapApi18A6D135.POST..auth.register":{"id":"ApiPermission.ScaleMapProdScaleMapApi18A6D135.POST..auth.register","path":"ScaleMapProd/ScaleMapApi/Default/auth/register/POST/ApiPermission.ScaleMapProdScaleMapApi18A6D135.POST..auth.register","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RegisterFunction735506DF","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/POST/auth/register"]]}}}},"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.POST..auth.register":{"id":"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.POST..auth.register","path":"ScaleMapProd/ScaleMapApi/Default/auth/register/POST/ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.POST..auth.register","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RegisterFunction735506DF","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/POST/auth/register"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/auth/register/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["RegisterFunction735506DF","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApiauthregisterBB7044BD"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}},"refresh":{"id":"refresh","path":"ScaleMapProd/ScaleMapApi/Default/auth/refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/auth/refresh/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ScaleMapApiauthBA436AC9"},"pathPart":"refresh","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapProd/ScaleMapApi/Default/auth/refresh/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/auth/refresh/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'https://scalemap.ai'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApiauthrefresh503A46F4"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"POST":{"id":"POST","path":"ScaleMapProd/ScaleMapApi/Default/auth/refresh/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapProdScaleMapApi18A6D135.POST..auth.refresh":{"id":"ApiPermission.ScaleMapProdScaleMapApi18A6D135.POST..auth.refresh","path":"ScaleMapProd/ScaleMapApi/Default/auth/refresh/POST/ApiPermission.ScaleMapProdScaleMapApi18A6D135.POST..auth.refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/POST/auth/refresh"]]}}}},"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.POST..auth.refresh":{"id":"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.POST..auth.refresh","path":"ScaleMapProd/ScaleMapApi/Default/auth/refresh/POST/ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.POST..auth.refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/POST/auth/refresh"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/auth/refresh/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["RefreshTokenFunction37E34807","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApiauthrefresh503A46F4"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}}}},"company":{"id":"company","path":"ScaleMapProd/ScaleMapApi/Default/company","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/company/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ScaleMapApi2204383E","RootResourceId"]},"pathPart":"company","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapProd/ScaleMapApi/Default/company/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/company/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'https://scalemap.ai'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApicompanyE86C5AA2"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"POST":{"id":"POST","path":"ScaleMapProd/ScaleMapApi/Default/company/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapProdScaleMapApi18A6D135.POST..company":{"id":"ApiPermission.ScaleMapProdScaleMapApi18A6D135.POST..company","path":"ScaleMapProd/ScaleMapApi/Default/company/POST/ApiPermission.ScaleMapProdScaleMapApi18A6D135.POST..company","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateCompanyFunctionB2EDBE20","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/POST/company"]]}}}},"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.POST..company":{"id":"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.POST..company","path":"ScaleMapProd/ScaleMapApi/Default/company/POST/ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.POST..company","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateCompanyFunctionB2EDBE20","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/POST/company"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/company/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JwtAuthorizer08CECD9F"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CreateCompanyFunctionB2EDBE20","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApicompanyE86C5AA2"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"GET":{"id":"GET","path":"ScaleMapProd/ScaleMapApi/Default/company/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapProdScaleMapApi18A6D135.GET..company":{"id":"ApiPermission.ScaleMapProdScaleMapApi18A6D135.GET..company","path":"ScaleMapProd/ScaleMapApi/Default/company/GET/ApiPermission.ScaleMapProdScaleMapApi18A6D135.GET..company","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetCompanyFunction40521299","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/GET/company"]]}}}},"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.GET..company":{"id":"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.GET..company","path":"ScaleMapProd/ScaleMapApi/Default/company/GET/ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.GET..company","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetCompanyFunction40521299","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/GET/company"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/company/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JwtAuthorizer08CECD9F"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetCompanyFunction40521299","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApicompanyE86C5AA2"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}},"assessment":{"id":"assessment","path":"ScaleMapProd/ScaleMapApi/Default/assessment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/assessment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ScaleMapApi2204383E","RootResourceId"]},"pathPart":"assessment","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapProd/ScaleMapApi/Default/assessment/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/assessment/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'https://scalemap.ai'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApiassessmentC3736B5E"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"POST":{"id":"POST","path":"ScaleMapProd/ScaleMapApi/Default/assessment/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapProdScaleMapApi18A6D135.POST..assessment":{"id":"ApiPermission.ScaleMapProdScaleMapApi18A6D135.POST..assessment","path":"ScaleMapProd/ScaleMapApi/Default/assessment/POST/ApiPermission.ScaleMapProdScaleMapApi18A6D135.POST..assessment","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateAssessmentFunction9342934F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/POST/assessment"]]}}}},"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.POST..assessment":{"id":"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.POST..assessment","path":"ScaleMapProd/ScaleMapApi/Default/assessment/POST/ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.POST..assessment","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateAssessmentFunction9342934F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/POST/assessment"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/assessment/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JwtAuthorizer08CECD9F"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CreateAssessmentFunction9342934F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApiassessmentC3736B5E"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"GET":{"id":"GET","path":"ScaleMapProd/ScaleMapApi/Default/assessment/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapProdScaleMapApi18A6D135.GET..assessment":{"id":"ApiPermission.ScaleMapProdScaleMapApi18A6D135.GET..assessment","path":"ScaleMapProd/ScaleMapApi/Default/assessment/GET/ApiPermission.ScaleMapProdScaleMapApi18A6D135.GET..assessment","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetAssessmentFunction53DE8AFB","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/GET/assessment"]]}}}},"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.GET..assessment":{"id":"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.GET..assessment","path":"ScaleMapProd/ScaleMapApi/Default/assessment/GET/ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.GET..assessment","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetAssessmentFunction53DE8AFB","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/GET/assessment"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/assessment/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JwtAuthorizer08CECD9F"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetAssessmentFunction53DE8AFB","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApiassessmentC3736B5E"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"responses":{"id":"responses","path":"ScaleMapProd/ScaleMapApi/Default/assessment/responses","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/assessment/responses/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ScaleMapApiassessmentC3736B5E"},"pathPart":"responses","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapProd/ScaleMapApi/Default/assessment/responses/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/assessment/responses/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'https://scalemap.ai'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApiassessmentresponses1B5A68B6"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"PUT":{"id":"PUT","path":"ScaleMapProd/ScaleMapApi/Default/assessment/responses/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapProdScaleMapApi18A6D135.PUT..assessment.responses":{"id":"ApiPermission.ScaleMapProdScaleMapApi18A6D135.PUT..assessment.responses","path":"ScaleMapProd/ScaleMapApi/Default/assessment/responses/PUT/ApiPermission.ScaleMapProdScaleMapApi18A6D135.PUT..assessment.responses","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UpdateResponsesFunctionBF692635","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/PUT/assessment/responses"]]}}}},"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.PUT..assessment.responses":{"id":"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.PUT..assessment.responses","path":"ScaleMapProd/ScaleMapApi/Default/assessment/responses/PUT/ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.PUT..assessment.responses","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UpdateResponsesFunctionBF692635","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/PUT/assessment/responses"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/assessment/responses/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JwtAuthorizer08CECD9F"},"httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UpdateResponsesFunctionBF692635","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApiassessmentresponses1B5A68B6"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}}}},"documents":{"id":"documents","path":"ScaleMapProd/ScaleMapApi/Default/documents","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/documents/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ScaleMapApi2204383E","RootResourceId"]},"pathPart":"documents","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapProd/ScaleMapApi/Default/documents/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/documents/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'https://scalemap.ai'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApidocumentsF359908A"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"upload":{"id":"upload","path":"ScaleMapProd/ScaleMapApi/Default/documents/upload","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/documents/upload/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ScaleMapApidocumentsF359908A"},"pathPart":"upload","restApiId":{"Ref":"ScaleMapApi2204383E"}}}},"OPTIONS":{"id":"OPTIONS","path":"ScaleMapProd/ScaleMapApi/Default/documents/upload/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/documents/upload/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'https://scalemap.ai'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"ScaleMapApidocumentsupload9463C0ED"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}},"POST":{"id":"POST","path":"ScaleMapProd/ScaleMapApi/Default/documents/upload/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.214.0","metadata":[]},"children":{"ApiPermission.ScaleMapProdScaleMapApi18A6D135.POST..documents.upload":{"id":"ApiPermission.ScaleMapProdScaleMapApi18A6D135.POST..documents.upload","path":"ScaleMapProd/ScaleMapApi/Default/documents/upload/POST/ApiPermission.ScaleMapProdScaleMapApi18A6D135.POST..documents.upload","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UploadHandlerFunction1DEB4309","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/",{"Ref":"ScaleMapApiDeploymentStageprodF4DD3120"},"/POST/documents/upload"]]}}}},"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.POST..documents.upload":{"id":"ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.POST..documents.upload","path":"ScaleMapProd/ScaleMapApi/Default/documents/upload/POST/ApiPermission.Test.ScaleMapProdScaleMapApi18A6D135.POST..documents.upload","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UploadHandlerFunction1DEB4309","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:884337373956:",{"Ref":"ScaleMapApi2204383E"},"/test-invoke-stage/POST/documents/upload"]]}}}},"Resource":{"id":"Resource","path":"ScaleMapProd/ScaleMapApi/Default/documents/upload/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JwtAuthorizer08CECD9F"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UploadHandlerFunction1DEB4309","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ScaleMapApidocumentsupload9463C0ED"},"restApiId":{"Ref":"ScaleMapApi2204383E"}}}}}}}}}}}}}},"ApiErrorAlarm":{"id":"ApiErrorAlarm","path":"ScaleMapProd/ApiErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/ApiErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmName":"scalemap-api-errors-production","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"ApiName","value":"ScaleMap API - production"}],"evaluationPeriods":2,"metricName":"5XXError","namespace":"AWS/ApiGateway","period":300,"statistic":"Sum","threshold":10,"treatMissingData":"notBreaching"}}}}},"LambdaErrorAlarm":{"id":"LambdaErrorAlarm","path":"ScaleMapProd/LambdaErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/LambdaErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmName":"scalemap-lambda-errors-production","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"HealthFunction19D7724A"}}],"evaluationPeriods":2,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":5,"treatMissingData":"notBreaching"}}}}},"CostAlarm":{"id":"CostAlarm","path":"ScaleMapProd/CostAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.214.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ScaleMapProd/CostAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.214.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmName":"scalemap-cost-production","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"Currency","value":"USD"}],"evaluationPeriods":1,"metricName":"EstimatedCharges","namespace":"AWS/Billing","period":300,"statistic":"Maximum","threshold":200,"treatMissingData":"notBreaching"}}}}},"ApiUrl":{"id":"ApiUrl","path":"ScaleMapProd/ApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.214.0"}},"TableName":{"id":"TableName","path":"ScaleMapProd/TableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.214.0"}},"DocumentsBucketName":{"id":"DocumentsBucketName","path":"ScaleMapProd/DocumentsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.214.0"}},"DlqUrl":{"id":"DlqUrl","path":"ScaleMapProd/DlqUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.214.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"ScaleMapProd/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"ScaleMapProd/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.214.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ScaleMapProd/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.214.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ScaleMapProd/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.214.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}